<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dairy B2B App Download</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <header>
    <h1>ğŸš€ Dairy B2B Apps</h1>
    <p>Download the apps you need below</p>
  </header>
  <div class="card">
    <h2>ğŸ“± Orders App</h2>
    <p>For clients to place and manage milk orders.</p>
    <a href="https://firebasestorage.googleapis.com/v0/b/dairyb2b-milk-sys-db2b-0-base.firebasestorage.app/o/base_template_apps%2Forders%2Fapp-arm64-v8a-release.apk?alt=media&token=712f80b9-a1a4-4804-af57-9f16d98c32f6"
      class="btn download-btn">Download Orders App</a>
  </div>

  <div class="card">
    <h2>âš™ï¸ Management App</h2>
    <p>Restricted access - enter access code to unlock.</p>

    <div class="input-container">
      <span class="icon">ğŸ”’</span>
      <input type="password" id="accessCode" class="code-input" placeholder="Enter access code" />
    </div>

    <a id="managementBtn"
      href="https://firebasestorage.googleapis.com/v0/b/dairyb2b-milk-sys-db2b-0-base.firebasestorage.app/o/base_template_apps%2Fmanagement%2Fapp-arm64-v8a-release.apk?alt=media&token=e66c2d1a-f0fc-44af-afc9-0313fca398af"
      class="btn download-btn disabled">
      Download Management App
    </a>
  </div>

  <footer>
    <p>Â© 2025 Dairy B2B. All rights reserved.</p>
  </footer>

  <!-- Loading overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    â³ Preparing your download...
  </div>

  <script>
    const correctCode = "1212";
    const input = document.getElementById("accessCode");
    const managementBtn = document.getElementById("managementBtn");
    const overlay = document.getElementById("loadingOverlay");

    // unlock management app
    input.addEventListener("input", () => {
      if (input.value === correctCode) {
        managementBtn.classList.remove("disabled");
      } else {
        managementBtn.classList.add("disabled");
      }
    });

    // handle download buttons
    document.querySelectorAll(".download-btn").forEach(btn => {
      btn.addEventListener("click", (e) => {
        if (btn.classList.contains("disabled")) {
          e.preventDefault();
          return;
        }

        overlay.style.display = "flex";

        setTimeout(() => {
          window.location.href = btn.href;
          overlay.style.display = "none"; // hides in case download fails
        }, 800);
      });
    });
  </script>
</body>

</html>